# 2과목

## 2-1 데이터베이스 개념

- DB의 정의
  - 공유, 저장, 통합, 운영 데이터 `공장통운`
- DB의 특징
  - 실시간 접근성
  - 계속적인 변화
  - 동시 공유
  - 내용에 의한 참조
  - 데이터의 독립성

- 데이터 언어 `정조제`
  - DDL(정의어)
    - CREATE, ALTER, DROP, TRUNCATE
  - DML(조작어)
    - INSERT, UPDATE, DELETE, SELECT
  - DCL(제어어)
    - GRANT, REVOKE, COMMIT, ROLLBACK

- 스키마
  - DB의 구조와 제약조건에 관해 전반적인 명세를 기술한 것
    - 외부, 개념, 내부
    - 외부 / 개념 사이에 논리적 독립성 존재
    - 개념 / 내부 사이에 물리적 독립성 존재

## 2-2 DBMS

- DB를 조작하는 별도의 소프트웨어
- 정의, 조작, 제어, 공유, 구축, 보호, 유지보수 `정조제 공구보유`
- 종류
  - 계층형
  - 네트워크형
  - 관계형
  - 객체 지향형
  - 객체 관계형 - 관계형 + 객체 지향형
  - NoSQL - Not only SQL
  - NewSQL

## 2-3 DB 설계

- 요구조건에서부터 DB구조를 도출해 내는 과정

- 이해관계자의 데이터 관점 요구사항에 대한 정확한 이해 및 추상화

- 고려사항
  
  - 제약조건
  - 무결성
  - 일관성
  - 회복
  - 보안
  - 효율성
  - 확장성

- 단계 `개논물`
  
  - 개념적 설계 : E-R다이어그램
  - 논리적 설계 : 정규화 과정, 트랜잭션 인터페이스 설계
  - 물리적 설계 : 물리적 구조와 내부적인 저장구조의 설계, 성능고려, 인덱션, 파티셔닝 등등
  - 구현

## 2-4 데이터 모델링

- 현실세계 요소를 인간과 컴퓨터가 이해할 수 있는 정보로 표현한 것

- 데이터모델 구조
  
  - 개체 (Table)
  - 속성 (Attribute) - 차수
  - 개체 인스턴스 - 튜플
  - 개체 set - 카디널리티

- 표시사항`구연제`
  
  - 구조
    - 표현될 대상으로서의 개체 타입과 관계
  - 연산
    - 실제 데이터를 처리하는 방법
  - 제약조건
    - 데이터의 논리적인 제약조건

## 2-5 개체-관계 모델

- DB에 대한 요구 사항을 그래픽적으로 표현
- 개체 : 현실 세계에서 꼭 필요한 사람이나 사물과 같이 구별되는 것
- 관계 : 서로 다른 객체가 맺고 있는 의미 있는 연관성

## 2-6 데이터 모델의 품질 기준

- 품질 항목 기준 `정완준 최일활`
  - 정확성
  - 완전성
  - 준거성
  - 최신성
  - 일관성
  - 활용성

## 2-7 논리 데이터베이스 설계

- 정규화
  - 관계형 DB설계에서 **중복을 최소화**하게 데이터를 구조화
    - 데이터 중복을 최소화
    - 정보의 무손실
    - 이상현상 최소화
    - 정보의 검색을 용이하게 함

- 이상현상`삭삽갱`
  - 데이터 중복으로 인해 릴레이션 조작 시 예상하지 못한 현상 발생
    - 삭제이상 : 한 튜플을 삭제할 때 연쇄 삭제 현상으로 인해 정보 손실
    - 삽입이상 : 데이터 삽입시 불필요한 데이터가 함께 삽입되는 현상
    - 갱신이상 : 튜플 속성값을 갱신할 때 일부 튜플의 정보만 갱신되어 정보 모순이 발생

- 함수적 종속
  - X->Y
    - X의 값을 알면 Y의 값을 바로 식별할 수 있고, X의 값에 Y값이 달라질 때 함수적 종속이라고 함
  - 부분 함수적 종속
  - 이행적 함수 종속 (X->Y->Z, X-Z)
  - 완전 함수적 종속

- 정규화 과정`두부이걸다줘?`
  - 도메인이 원자값 (비정규 -> 1NF)
  - 부분적 함수 종속 제거 (1NF -> 2NF)
  - 이행적 함수 종속 제거 (2NF -> 3NF)
  - 결정자이면서 후보키가 아닌 것 제거 (3NF -> BCNF)
  - 다치 종속 제거 (BCNF -> 4NF)
  - 조인 종속성 이용 (4NF -> 5NF)

## 2-8 물리 데이터베이스 설계

- 과정    
  
  - 사용자 DBMS 결정
  
  - 데이터 타입 크기 결정
  
  - 데이터 용량 및 설계
  
  - 업무 프로세스 분석
  
  - 반정규화 - 진행 집계 특정
  
  - 인덱스 정의 (Hint - 하나의 테이블, 여러개의 인덱스가 있을 때 최적 인덱스를 명시)
  
  - DB 생성

- 암호화 과정
  - API 방식 (소프트웨어)
  - Plug-in 방식 (모듈)
  - TDE
  - 파일암호화 방식
  - 하드웨어 방식

- 반정규화
  - 정규화 이후, 성능향상을 위해 정규화 기법에 위배되는 수행 기법

- DB 이중화
  - 장애발생시 DB를 보호하기 위한 방법
  - 지속적인 정상 운영이 가능한 **고가용성(High Availability)**서버로 구성하는 것
  - 동일한 DB를 중복해 동시에 갱신해 관리하는 방법
  - 분류
    - Eager
      - 변경 발생 즉시 변경내용이 반영
    - Lazy
      - 트랜잭션의 수행이 완료된 후에 반영
  - 종류
    - Active-Active : 다중화된 장비가 모두 가동
    - Active-Standby : 하나는 가동, 하나는 준비 상태로 대기
      - Hot standby : 즉시 사용 가능
      - Warm standby : 설정에 대한 준비 필요
      - Cold standby : 정지시켜두며 필요에 따라 직접 켜서 구성

## 2-9 백업방식

- 전체 백업
  
  - 모두 백업

- 증분 백업
  
  - 전체 백업 이후 변경/추가된 데이터만 백업

- 차등 백업
  
  - 전체 백업 이후 변경/추가된 데이터 모두 백업

- 실시간 백업

- 트랜잭션 로그 백업

- 복구시간목표(RTO)
  - 서비스 중단 시점과 서비스 복원 시점 간에 허용되는 최대 지연 시간
- 복구시점목표(RPO)
  - 마지막 데이터 복구 시점 이후 허용되는 최대 시간

## 2-10 DB 물리속성 설계

- 파티셔닝
  - DB를 여러 부분으로 분할
    - 범위
    - 목록
    - 해시
    - 라운드 로빈
    - 합성
- 클러스터
  - 디스크로부터 데이터를 읽어오는 시간을 줄이기 위해 자주 사용되는 테이블의 데이터를 같은 위치에 저장시키는 방법
  - 대상
    - 분포도가 넓은 테이블
    - 대량의 범위를 자주 조회
    - 입력, 수정, 삭제가 자주 발생하지 않는 테이블
    - 자주 JOIN되는 테이블
- 인덱스
  - 추가 저장 공간을 활용해 DB 검색 속도를 향상시키기 위한 자료구조
    - 클러스터 : 테이블 당 1개만 허용, 물리적으로 정렬
    - 논클러스터 : 레코드 원본은 정렬되지 않고, 인덱스 페이지만 정렬
    - 밀집 인덱스
    - 희소 인덱스
- 뷰(외부 스키마)
  - 하나 이상의 기본 테이블로부터 유도된, 이름을 가지는 가상 테이블
- 시스템 카탈로그
  - DB에 저장된 개체들에 대한 정의나 명세에 대한 정보가 수록되어 있는 시스템 테이블
  - DB의 DB

## 2-11 관계 데이터베이스 모델

- 테이블 형태의 평면 파일로 표현되는 모델
- 관계데이터 언어(관계대수, 관계해석)
  - 관계대수 : 데이터를 어떻게 찾는지에 대한 처리과정을 명시하는 절차적 언어
  - 관계해석 : 계산 수식 사용, 비절차적 언어, 데이터 연산을 표현하는 방법

## 2-12 키와 무결성 제약조건

- 컬럼
  - 릴레이션에서 정보를 나타내는 최소 단위, 각 열의 상태나 특성을 나타내는 항목
- 속성의 분류
  - 기본 속성 : 업무로부터 추출
  - 설계 속성 : 코드성 데이터, 식별용 일련번호
  - 파생 속성 : 다른 속성에 영향을 받아 발생
- 세부의미에 따른 분류
  - 단순 속성 : 나이, 성별같이 다른 속성들로 구성될 수 없는 단순한 속성
  - 복합 속성 : 주소와 같이 여러 세부 속성들로 구성될 수 있는 속성
- 구성 방식에 따른 분류
  - 기본키 : 튜플을 유일하게 구분할 수 있는 속성
  - 참조키 : 다른 릴레이션과의 관게에서 참조하고 있는 속성
  - 일반 속성 : 기본키, 참조키가 아닌 속성
- 도메인
  - 속성이 가질 수 있는 값의 범위

- 키의 종류
  
  - 조건에 만족하는 튜플을 찾거나 정렬할 때 다른 튜플들과 구별할 수 있는 유일한 기준이 되는 컬럼
  - 슈퍼키(유일성) : 조합할 수 있는 모든 키
  - 후보키(최소성) : 슈퍼키 중에서 적절한 키 (학생테이블에서 학번, 주민번호)
  - 기본키 : (학생테이블에서 학번)
  - 대체키 : (학생테이블에서 주민번호) 후보키에서 기본키를 제외한 나머지

- 데이터베이스 무결성
  - 정확성, 유효성, 일관성`정유일`이 유지되는 것
  - 종류
    - 개체 무결성 : 기본키 속성에서 Null값이나 중복값이 오면 안된다
    - 참조 무결성 : 제한, 연쇄
    - 도메인 무결성 : 적절한 값

## 2-13 물리데이터 모델 품질 검토

- CRUD
  
  - Create, Read, Update, Delete 데이터 처리기능
  - 필요성
    - 모델링 작업검증
    - 중요 산출물
    - 테스트 시 사용
    - 인터페이스 현황 파악

- 옵티마이저
  
  - 구문분석(Parsing) -> 실행 -> 인출(Fetch) `구실인`
  
  - 사용자가 질의한 SQL문에 대해 최적의 실행 방법을 결정하는 역할 수행
  
  - 구분
    
    - 규칙기반
    - 비용기반

- SQL 성능 튜닝
  
  - 튜닝
    - SQL을 최적화해 빠른 시간 내 원하는 결과값을 얻기 위한 작업
  - 성능 최적화를 위한 유틸리티
    - SQL Trace
    - TKPROF(Trace Kernel PROFile)
    - Explain Plan

## 2-14 분산 데이터베이스

- 여러 곳으로 분산된 DB를 하나의 가상 시스템으로 사용할 수 있도록 하는 DB

- 구성요소`처데네`
  
  - 분산 처리기
  - 분산 데이터베이스
  - 통신 네트워크

- 투명성
  
  - 위치 투명성 
  - 분할 투명성
  - 지역사상 투명성
  - 중복 투명성
  - 병행 투명성
  - 장애 투명성

- CAP 이론
  
  - 어떤 분산환경에서도 일관성(C), 가용성(A), 분단 허용성(P) 3개 중 2개만 가질 수 있음
  - 3가지 모두 만족할 수 없다

- **트랜잭션**
  
  - DB상태를 변환시키는 하나의 논리적 기능을 수행하는 작업단위
  - 성질`ACID`
    - 원자성(**A**tomicity) - 연산은 모두 반영되거나 모두 반영되지 말아야 함, COMMIT, ROLLBACK
    - 일관성(**C**onstency) - 데이터가 일관적으로 유지
    - 독립성(**I**solation) - 트랜잭션 수행 중 다른 트랜잭션에 영향을 미치면 안됨
    - 영속성(**D**urability) - 데이터는 영구히 보존
  - 부분 완료

## 2-15 병행제어와 회복

- 여러 트랜잭션들이 동시에 실행되면서도 DB의 일관성을 유지할 수 있게 하는 기법

- 병행제어를 하지 않았을 때의 문제점`갱비모연`
  
  - 갱신 분실
  - 비완료 의존성
  - 모순성
  - 연쇄 복귀

- 병행제어 기법
  
  - 로킹
  - 2단계 로킹 규약 (로킹에서 확장 축소가 추가)
  - 타임 스탬프 (시간 할당)
  - 낙관적 병행제어
  - 다중 버전 병행제어 (타임 스탬프를 여러개)

- 회복
  
  - 트랜잭션 수행 중 장애로 인해 손상된 DB를 손상되기 이전 상태로 복구시키는 작업
  - UNDO
    - 오류와 관련된 모든 변경을 취소해 복구 수행
  - REDO
    - 오류가 발생한 트랜잭션을 재실행해 복구 수행

- 로그 파일
  
  - 트랜잭션이 반영한 모든 변경사항을 DB에 기록하기 전에 미리 기록해두는 별도 파일

- 회복 기법
  
  - 로그 기반 회복 기법
    - 지연갱신 회복 기법 - UNDO가 필요 없음
    - 즉시갱신 회복 기법
  - 검사점 회복 기법 - 체크포인트, 검사점 이후에 처리된 트랜잭션은 회복 작업 수행
  - 그림자 페이징 회복 기법 - 로그를 이용하지 않는다, 현재 페이지 테이블과 그림자 페이지 테이블을 유지
  - 미디어 회복 기법 - 백업, 미러링, RAID
  - ARIES 회복 기법 - 알고리즘 이용

- ETL, Migration
  - 필요 데이터를 추출, 변환해 타깃 시스템으로 전송 및 로딩하는 과정